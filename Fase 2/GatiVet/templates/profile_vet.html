<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historial de Mascotas</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/Logo Gativet.png') }}">
    <link rel="stylesheet" href="static/styles/profile_vet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-gray-100">

    <!-- Steps -->
    <header class="flex p-4 border-b border-gray-300" style="background-color: #18beab;">
        <a href="{{ url_for('home') }}">
            <img src="{{ url_for('static', filename='img/Logo Gativet.png') }}" alt="Logo Gativet"
                class="w-12 h-12 mr-2">
        </a>
        <button
            class="tab-button bg-[#18beaa] text-white border border-gray-300 py-1 px-2 mr-2 focus:outline-none hover:bg-[#16a89a] transition-transform transform-gpu hover:-translate-y-1 hover:shadow-lg cursor-pointer"
            style="background-color: #18beaa; color: white;" onclick="showSection('doctor-info', this)">Datos del
            Doctor</button>
        <button
            class="tab-button bg-[#18beaa] text-white border border-gray-300 py-1 px-2 mr-2 focus:outline-none hover:bg-[#16a89a] transition-transform transform-gpu hover:-translate-y-1 hover:shadow-lg cursor-pointer"
            style="background-color: #18beaa; color: white;" onclick="showSection('clinical-records', this)">Fichas
            Clínicas</button>
        <button
            class="tab-button bg-[#18beaa] text-white border border-gray-300 py-1 px-2 mr-2 focus:outline-none hover:bg-[#16a89a] transition-transform transform-gpu hover:-translate-y-1 hover:shadow-lg cursor-pointer"
            style="background-color: #18beaa; color: white;" onclick="showSection('agenda', this)">Agenda</button>
    </header>
    <!-- Fin Steps -->


    <!-- Datos del Doctor -->
    <!-- Modal para editar información -->
    <div id="editModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center hidden">
        <div class="bg-white p-4 rounded-lg shadow-lg w-3/4 md:w-1/3">
            <h2 class="text-lg font-semibold mb-2">Editar Información del Veterinario</h2>
            <form id="editForm">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="edit-rut" class="block text-gray-600 text-sm">RUT</label>
                        <input type="text" id="edit-rut" name="rut" placeholder="12.345.678-9" required
                            class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                            value="{{ vet.id_usuario if vet.id_usuario else 'Rut' }}" readonly>
                        <small id="rutError" class="text-xs text-red-500 hidden">Formato incorrecto. Ej:
                            12.345.678-9</small>
                    </div>

                    <div>
                        <label for="edit-nombre-doctor" class="block text-gray-600 text-sm">Nombre</label>
                        <input type="text" id="edit-nombre-doctor" name="nombre-doctor" required
                            class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                            value="{{ vet.nombre if vet.nombre else 'Nombre' }}">
                    </div>
                    <div>
                        <label for="edit-apellido" class="block text-gray-600 text-sm">Apellido</label>
                        <input type="text" id="edit-apellido" name="apellido" required
                            class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                            value="{{ vet.appaterno if vet.appaterno else 'Apellido' }}">
                    </div>
                    <div>
                        <label for="edit-especialidad" class="block text-gray-600 text-sm">Especialidad</label>
                        <input type="text" id="edit-especialidad" name="especialidad" required
                            class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                            value="{{ vet.especialidad if vet.especialidad else 'Especialidad' }}">
                    </div>
                    <div>
                        <label for="edit-domicilio" class="block text-gray-600 text-sm">Dirección</label>
                        <input type="text" id="edit-domicilio" name="domicilio" required
                            class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                            value="{{ vet.domicilio if vet.domicilio else 'Av. Siempre viva' }}">
                    </div>
                    <ul id="suggestions" class="hidden"></ul>

                    <script>
                        // Función para obtener sugerencias de direcciones en Chile
                        async function getAddressSuggestions(input) {
                            try {
                                const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&q=${input}, Chile`);
                                if (!response.ok) {
                                    throw new Error(`HTTP error! status: ${response.status} - ${response.statusText}`);
                                }
                                const data = await response.json();
                                return data;
                            } catch (error) {
                                console.error('Error fetching address suggestions:', error.message);
                                console.error('Input that caused the error:', input); // Añadir más información de depuración
                                return [];
                            }
                        }


                        // Manejo de eventos para el autocompletado
                        const addressInput = document.getElementById('edit-domicilio');
                        const suggestionsList = document.getElementById('suggestions');

                        // Agregar debounce para evitar hacer demasiadas solicitudes
                        let debounceTimeout;

                        addressInput.addEventListener('input', () => {
                            clearTimeout(debounceTimeout); // Limpia el timeout previo

                            debounceTimeout = setTimeout(async () => {
                                const query = addressInput.value;

                                // Limpia las sugerencias anteriores
                                suggestionsList.innerHTML = '';

                                if (query.length > 2) { // Mínimo 3 caracteres para buscar
                                    const suggestions = await getAddressSuggestions(query);

                                    // Muestra las sugerencias
                                    if (suggestions.length > 0) {
                                        suggestionsList.classList.remove('hidden'); // Muestra la lista si hay sugerencias
                                        suggestions.forEach(suggestion => {
                                            const li = document.createElement('li');
                                            li.textContent = suggestion.display_name;
                                            li.classList.add('p-2', 'cursor-pointer', 'hover:bg-gray-200');

                                            // Cuando se selecciona una sugerencia
                                            li.onclick = () => {
                                                addressInput.value = suggestion.display_name; // Establece la dirección seleccionada
                                                suggestionsList.innerHTML = ''; // Limpia las sugerencias
                                                suggestionsList.classList.add('hidden'); // Oculta la lista
                                            };

                                            suggestionsList.appendChild(li);
                                        });
                                    } else {
                                        suggestionsList.classList.add('hidden'); // Oculta la lista si no hay sugerencias
                                    }
                                } else {
                                    suggestionsList.classList.add('hidden'); // Oculta la lista si hay menos de 3 caracteres
                                }
                            }, 300); // Espera 300ms antes de ejecutar la búsqueda
                        });

                        // Cierra la lista de sugerencias al hacer clic fuera
                        document.addEventListener('click', (event) => {
                            if (!addressInput.contains(event.target) && !suggestionsList.contains(event.target)) {
                                suggestionsList.classList.add('hidden');
                            }
                        });
                    </script>


                    <style>
                        /* Estilo para la lista de sugerencias */
                        #suggestions {
                            list-style: none;
                            padding: 0;
                            margin: 0;
                            max-height: 200px;
                            overflow-y: auto;
                            width: 100%;
                            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                            z-index: 1000;
                            position: absolute;
                            /* Asegura que la lista esté posicionada correctamente */
                            background: white;
                            /* Fondo blanco para la lista de sugerencias */
                        }

                        #suggestions li {
                            border-bottom: 1px solid #e2e8f0;
                            /* Línea separadora */
                        }
                    </style>

                    <div>
                        <label for="edit-numeracion" class="block text-gray-600 text-sm">Numeración</label>
                        <input type="text" id="edit-numeracion" name="numeracion" required
                            class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                            value="{{ vet.numeracion if vet.numeracion else '123' }}">
                    </div>
                    <div>
                        <label for="edit-telefono-dom" class="block text-gray-600 text-sm">Teléfono</label>
                        <input type="text" id="edit-telefono-dom" name="telefono-dom" placeholder="+569-" required
                            class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                            value="{{ vet.celular if vet.celular else '123456789' }}">
                        <small id="telefonoError" class="text-xs text-red-500 hidden">Debe comenzar con +569- y tener
                            exactamente 8 dígitos después del prefijo.</small>
                    </div>
                    <div>
                        <label for="edit-correo" class="block text-gray-600 text-sm">Correo Electrónico</label>
                        <input type="email" id="edit-correo" name="correo" required
                            class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                            value="{{ vet.correo if vet.correo else 'correo@ejemplo.com' }}">
                    </div>
                </div>
                <div class="mt-4 flex justify-end">
                    <button type="button" id="closeModalBtn"
                        class="bg-red-500 text-white py-1 px-2 rounded text-sm mr-2">Cancelar</button>
                    <button type="submit" style="background-color: #18beaa; color: white;"
                        class="py-1 px-2 rounded text-sm">Guardar Cambios</button>
                </div>
            </form>
        </div>
    </div>
    <!-- Formulario del Doctor -->
    <div class="container mx-auto flex items-start justify-center pt-10" id="doctor-info">
        <section class="p-4 w-full max-w-3xl bg-white shadow-md rounded-lg">
            <h2 class="text-2xl font-bold">Información del Veterinario</h2>
            <div class="card bg-gray-100 p-4 rounded-md shadow">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="md:col-span-2">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="rut" class="block text-gray-600 text-sm">Rut:</label>
                                <input type="text" id="rut" name="rut" disabled
                                    class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                    value="{{ vet.id_usuario if vet.id_usuario else 'Rut' }}">
                            </div>
                            <div>
                                <label for="nombre-doctor" class="block text-gray-600 text-sm">Nombre:</label>
                                <input type="text" id="nombre-doctor" name="nombre-doctor" disabled
                                    class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                    value="{{ vet.nombre if vet.nombre else 'Nombre' }}">
                            </div>
                            <div>
                                <label for="apellido" class="block text-gray-600 text-sm">Apellido:</label>
                                <input type="text" id="apellido" name="apellido" disabled
                                    class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                    value="{{ vet.appaterno if vet.appaterno else 'Apellido' }}">
                            </div>
                            <div>
                                <label for="especialidad" class="block text-gray-600 text-sm">Especialidad:</label>
                                <input type="text" id="especialidad" name="especialidad" disabled
                                    class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                    value="{{ vet.especialidad if vet.especialidad else 'Especialidad' }}">
                            </div>
                            <div>
                                <label for="domicilio" class="block text-gray-600 text-sm">Direccion:</label>
                                <input type="text" id="domicilio" name="domicilio" disabled
                                    class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                    value="{{ vet.domicilio if vet.domicilio else 'Av. Siempre viva' }}">
                            </div>
                            <div>
                                <label for="numeracion" class="block text-gray-600 text-sm">Numeración:</label>
                                <input type="text" id="numeracion" name="numeracion" disabled
                                    class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                    value="{{ vet.numeracion if vet.numeracion else '123' }}">
                            </div>
                            <div>
                                <label for="telefono-dom" class="block text-gray-600 text-sm">Teléfono:</label>
                                <input type="text" id="telefono-dom" name="telefono-dom" disabled
                                    class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                    value="{{ vet.celular if vet.celular else '123456789' }}">
                            </div>
                            <div>
                                <label for="correo" class="block text-gray-600 text-sm">Correo Electrónico:</label>
                                <input type="email" id="correo" name="correo" disabled
                                    class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                    value="{{ vet.correo if vet.correo else 'correo@ejemplo.com' }}">
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-center items-center">
                        <div class="flex flex-col items-center">
                            <label class="block text-gray-600 text-sm">Foto de perfil:</label>
                            <div class="w-48 h-48 border rounded-md overflow-hidden mb-2">
                                <img id="profile-picture"
                                    src="{{ vet.imagen if vet.imagen else 'default_image_url.jpg' }}"
                                    alt="Foto del Doctor" class="w-full h-full object-cover">
                            </div>
                            <!-- Formulario para la subida de la imagen -->
                            <form id="upload-form" action="/upload_photo_vet" method="POST"
                                enctype="multipart/form-data">
                                <input type="file" id="upload-photo" name="photo" class="hidden" accept="image/*">
                                <label for="upload-photo" style="background-color: #18beaa; color: white;"
                                    class="py-1 px-2 rounded cursor-pointer text-sm">Cambiar Foto</label>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="mt-4">
                    <button type="button" id="editBtn" style="background-color: #18beaa; color: white;"
                        class="py-1 px-2 rounded text-sm">Editar</button>
                </div>

                <hr class="my-4 border-gray-300 flex items-center mt-2">


                <div class="bg-white p-4 rounded-lg shadow flex items-center mt-2 w-full">
                    <div class="mt-4 flex flex-col gap-4 w-full">
                        <h2 class="font-bold text-lg">Recordatorios</h2>
                        <div class="bg-gray-100 p-2 rounded-md shadow">
                            <h3 class="font-semibold text-sm">Atenciones Pasadas</h3>
                            <div class="overflow-x-auto">
                                <table class="min-w-full mt-2 border border-gray-300 table-fixed">
                                    <thead>
                                        <tr>
                                            <th class="border border-gray-300 p-1 text-sm text-left">Fecha</th>
                                            <th class="border border-gray-300 p-1 text-sm text-left">Detalle</th>
                                            <th class="border border-gray-300 p-1 text-sm text-left">Mascota</th>
                                            <th class="border border-gray-300 p-1 text-sm text-left">Dueño</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="border border-gray-300 p-1 text-sm">01/01/2024</td>
                                            <td class="border border-gray-300 p-1 text-sm">Atención 1: Detalle de
                                                atención pasada</td>
                                            <td class="border border-gray-300 p-1 text-sm">Mascota 1</td>
                                            <td class="border border-gray-300 p-1 text-sm">Dueño 1</td>
                                        </tr>
                                        <tr>
                                            <td class="border border-gray-300 p-1 text-sm">01/02/2024</td>
                                            <td class="border border-gray-300 p-1 text-sm">Atención 2: Detalle de
                                                atención pasada</td>
                                            <td class="border border-gray-300 p-1 text-sm">Mascota 2</td>
                                            <td class="border border-gray-300 p-1 text-sm">Dueño 2</td>
                                        </tr>
                                        <tr>
                                            <td class="border border-gray-300 p-1 text-sm">01/03/2024</td>
                                            <td class="border border-gray-300 p-1 text-sm">Atención 3: Detalle de
                                                atención pasada</td>
                                            <td class="border border-gray-300 p-1 text-sm">Mascota 3</td>
                                            <td class="border border-gray-300 p-1 text-sm">Dueño 3</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="bg-gray-100 p-2 rounded-md shadow">
                            <h3 class="font-semibold text-sm">Atenciones Futuras</h3>
                            <div class="overflow-x-auto">
                                <table class="min-w-full mt-2 border border-gray-300 table-fixed">
                                    <thead>
                                        <tr>
                                            <th class="border border-gray-300 p-1 text-sm text-left">Fecha</th>
                                            <th class="border border-gray-300 p-1 text-sm text-left">Detalle</th>
                                            <th class="border border-gray-300 p-1 text-sm text-left">Mascota</th>
                                            <th class="border border-gray-300 p-1 text-sm text-left">Dueño</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="border border-gray-300 p-1 text-sm">01/04/2024</td>
                                            <td class="border border-gray-300 p-1 text-sm">Atención 1: Detalle de
                                                atención futura</td>
                                            <td class="border border-gray-300 p-1 text-sm">Mascota 1</td>
                                            <td class="border border-gray-300 p-1 text-sm">Dueño 1</td>
                                        </tr>
                                        <tr>
                                            <td class="border border-gray-300 p-1 text-sm">01/05/2024</td>
                                            <td class="border border-gray-300 p-1 text-sm">Atención 2: Detalle de
                                                atención futura</td>
                                            <td class="border border-gray-300 p-1 text-sm">Mascota 2</td>
                                            <td class="border border-gray-300 p-1 text-sm">Dueño 2</td>
                                        </tr>
                                        <tr>
                                            <td class="border border-gray-300 p-1 text-sm">01/06/2024</td>
                                            <td class="border border-gray-300 p-1 text-sm">Atención 3: Detalle de
                                                atención futura</td>
                                            <td class="border border-gray-300 p-1 text-sm">Mascota 3</td>
                                            <td class="border border-gray-300 p-1 text-sm">Dueño 3</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <!-- Datos del Doctor -->


    <!-- Fichas Clínicas -->
    <div class="container mx-auto flex items-start justify-center pt-10" id="clinical-records">
        <section class="p-4 w-full max-w-3xl bg-white shadow-md rounded-lg">
            <h2 class="text-xl font-semibold text-center">Fichas Clínicas</h2>

            <!-- Formulario de búsqueda por RUT y selección de mascota -->
            <form class="flex flex-col space-y-4 items-center mt-2 w-full md:flex-row md:space-y-0 md:space-x-4"
                onsubmit="return false;">
                <div class="relative w-full md:w-1/4">
                    <label for="rut-paciente-nuevo" class="block text-gray-700 text-xs">Buscar por RUT:</label>
                    <input type="text" id="rut-paciente-nuevo" name="rut-paciente" required maxlength="12"
                        placeholder="12.345.678-9"
                        class="mt-1 block w-full border border-gray-300 rounded-md text-xs py-1 px-2 pr-10"
                        onblur="formatRUT(this)">
                </div>
                <button type="button" onclick="searchPetByUserId()"
                    class="mt-4 p-2 text-white rounded-md w-full md:w-auto flex items-center justify-center"
                    style="background-color: #69d9cd; hover: background-color: #18beaa;">
                    <i class="fas fa-search" style="font-size: 14px;"></i>
                </button>
                <!-- Select para elegir mascota -->
                <div class="relative w-full md:w-1/4">
                    <label for="pet-select" class="block text-gray-700 text-xs">Seleccionar Mascota:</label>
                    <select id="pet-select"
                        class="mt-1 block w-full border border-gray-300 rounded-md text-xs py-1 px-2">
                        <!-- Las opciones se llenarán dinámicamente -->
                    </select>
                </div>
            </form>

            <!-- Contenido del paciente después de la búsqueda -->
            <div id="pet-data" class="flex justify-center mt-4 hidden">
                <div class="w-full max-w-md">
                    <h2 class="text-lg font-bold text-center text-green-600 mb-4">Datos del Dueño</h2>
                    <div class="border border-blue-300 p-6 rounded-lg shadow-lg bg-white">
                        <p class="text-gray-700 text-sm mb-2">
                            <strong>Nombre:</strong> <span id="owner-name" class="text-gray-600">Nombre del
                                Dueño</span>
                        </p>
                        <p class="text-gray-700 text-sm mb-2">
                            <strong>Rut:</strong> <span id="owner-rut" class="text-gray-600">Rut del
                                Dueño</span>
                        </p>
                        <p class="text-gray-700 text-sm mb-2">
                            <strong>Dirección:</strong> <span id="owner-address" class="text-gray-600">Dirección del
                                Dueño</span>
                        </p>
                        <p class="text-gray-700 text-sm mb-2">
                            <strong>Teléfono:</strong> <span id="owner-phone" class="text-gray-600">Teléfono
                                del Dueño</span>
                        </p>
                        <p class="text-gray-700 text-sm mb-4">
                            <strong>Correo:</strong> <span id="owner-email" class="text-gray-600">Correo Electrónico del
                                Dueño</span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Sistema de Pestañas Mejorado -->
            <div class="border-b border-gray-300 mt-4 overflow-x-auto">
                <ul class="flex flex-wrap md:flex-nowrap">
                    <li class="flex-grow md:flex-grow-0">
                        <a id="tab1-btn" href="#tab1"
                            class="bg-white block text-center py-2 px-4 text-green-500 font-semibold border-l border-t border-r border-gray-300 rounded-t hover:bg-gray-100">
                            Datos del Paciente
                        </a>
                    </li>
                    <li class="flex-grow md:flex-grow-0">
                        <a id="tab2-btn" href="#tab2"
                            class="bg-white block text-center py-2 px-4 text-gray-500 font-semibold hover:bg-gray-100">
                            Historia Clínica
                        </a>
                    </li>
                    <li class="flex-grow md:flex-grow-0">
                        <a id="tab3-btn" href="#tab3"
                            class="bg-white block text-center py-2 px-4 text-gray-500 font-semibold hover:bg-gray-100">
                            Vacunas
                        </a>
                    </li>
                    <li class="flex-grow md:flex-grow-0">
                        <a id="tab4-btn" href="#tab4"
                            class="bg-white block text-center py-2 px-4 text-gray-500 font-semibold hover:bg-gray-100">
                            Desparasitaciones
                        </a>
                    </li>
                    <li class="flex-grow md:flex-grow-0">
                        <a id="tab5-btn" href="#tab5"
                            class="bg-white block text-center py-2 px-4 text-gray-500 font-semibold hover:bg-gray-100">
                            Ficha
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Contenido de las pestañas -->
            <!-- Contenido Datos del Paciente -->
            <div id="tab1" class="p-6">
                <h2 class="text-2xl font-bold">Datos del Paciente</h2>
                <div class="card bg-gray-100 p-4 rounded-md shadow">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="md:col-span-2">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="pet-name" class="block text-gray-600 text-sm">Nombre de la
                                        Mascota:</label>
                                    <input type="text" id="pet-name" name="pet-name" disabled
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        value="Nombre de la Mascota">
                                </div>
                                <div>
                                    <label for="birth-date" class="block text-gray-600 text-sm">Fecha de
                                        Nacimiento:</label>
                                    <input type="text" id="birth-date" name="birth-date" disabled
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        value="Fecha de Nacimiento">
                                </div>
                                <div>
                                    <label for="age" class="block text-gray-600 text-sm">Edad:</label>
                                    <input type="text" id="age" name="age" disabled
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        value="Edad">
                                </div>
                                <div>
                                    <label for="gender" class="block text-gray-600 text-sm">Sexo:</label>
                                    <input type="text" id="gender" name="gender" disabled
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        value="Sexo">
                                </div>
                                <div>
                                    <label for="microchip-number" class="block text-gray-600 text-sm">N°
                                        Microchip:</label>
                                    <input type="text" id="microchip-number" name="microchip-number" disabled
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        value="Número de Microchip">
                                </div>
                                <div>
                                    <label for="species" class="block text-gray-600 text-sm">Especie:</label>
                                    <input type="text" id="species" name="species" disabled
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        value="Especie">
                                </div>
                                <div>
                                    <label for="breed" class="block text-gray-600 text-sm">Raza:</label>
                                    <input type="text" id="breed" name="breed" disabled
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        value="Raza">
                                </div>
                                <div>
                                    <label for="size" class="block text-gray-600 text-sm">Tamaño:</label>
                                    <input type="text" id="size" name="size" disabled
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        value="Tamaño">
                                </div>
                                <div>
                                    <label for="coat-color" class="block text-gray-600 text-sm">Color de Pelaje:</label>
                                    <input type="text" id="coat-color" name="coat-color" disabled
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        value="Color de Pelaje">
                                </div>
                            </div>
                            <!-- Botón para abrir el modal -->
                            <button onclick="openEditPetModal()"
                                class="bg-blue-500 text-white mt-6 px-4 py-2 rounded-md">Editar Información</button>
                        </div>
                        <div class="flex justify-center items-center">
                            <div class="flex flex-col items-center">
                                <label class="block text-gray-600 text-sm">Foto de perfil:</label>
                                <div class="w-48 h-48 border rounded-md overflow-hidden mb-2">
                                    <img id="profile-picture-mas" src="https://via.placeholder.com/150"
                                        alt="Foto de la Mascota" class="w-full h-full object-cover">
                                </div>
                                <input type="file" id="upload-photo" class="hidden">
                                <div id="status-info" class="mt-4 text-gray-600 text-sm"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="card bg-gray-100 p-4 rounded-md shadow">
                        <div class="flex items-center">
                            <input type="checkbox" id="reproducer" class="mr-2">
                            <label for="reproducer" class="text-gray-600 text-sm">Reproductor</label>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="treatment" class="mr-2">
                            <label for="treatment" class="text-gray-600 text-sm">En Tratamiento anticonceptivo</label>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="sterilized" class="mr-2">
                            <label for="sterilized" class="text-gray-600 text-sm">Esterilizado/Castrado</label>
                        </div>
                    </div>

                    <div class="card bg-gray-100 p-4 rounded-md shadow">
                        <div class="flex items-center">
                            <input type="checkbox" id="deceased" class="mr-2">
                            <label for="deceased" class="text-gray-600 text-sm">Fallecimiento</label>
                        </div>
                        <div class="mt-2">
                            <label for="cause-of-death" class="block text-gray-600 text-sm">Causa del deceso:</label>
                            <input type="text" id="cause-of-death" name="cause-of-death"
                                class="border border-gray-300 rounded-md py-1 px-2 w-full">
                        </div>
                        <button id="save-status-btn" style="background-color: #18beaa; color: white;"
                            class="mt-2 py-1 px-2 rounded cursor-pointer text-sm">
                            Guardar Estado
                        </button>
                        <p id="save-message" class="text-green-500 mt-2"></p>
                    </div>
                </div>

            </div>
            <!-- Fin Contenido Datos del Paciente -->

            <!-- Modal de edición de mascota -->
            <div id="modal-edit-pet" class="hidden fixed z-10 inset-0 overflow-y-auto">
                <div class="flex items-center justify-center min-h-screen">
                    <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-md">
                        <h2 class="text-2xl font-bold mb-4">Editar Información de Mascota</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="relative mb-4">
                                <label for="modal-pet-name"
                                    class="text-xs font-medium text-gray-900 block mb-2">Nombre:</label>
                                <input type="text" name="modal-pet-name" id="modal-pet-name"
                                    class="shadow-sm border border-gray-300 text-gray-900 sm:text-xs rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block p-2 input-short input-background"
                                    required>
                            </div>
                            <div class="relative mb-4">
                                <label for="modal-age"
                                    class="text-xs font-medium text-gray-900 block mb-2">Edad:</label>
                                <input type="text" name="modal-age" id="modal-age"
                                    class="shadow-sm border border-gray-300 text-gray-900 sm:text-xs rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block p-2 input-short input-background"
                                    required>
                            </div>
                            <div class="relative mb-4">
                                <label for="modal-birth-date" class="text-xs font-medium text-gray-900 block mb-2">Fecha
                                    de nacimiento:</label>
                                <input type="date" id="modal-birth-date" name="modal-birth-date"
                                    class="shadow-sm border border-gray-300 text-gray-900 sm:text-xs rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block p-2 input-short input-background"
                                    required onchange="calculateAge()">
                            </div>
                            <div class="relative mb-4">
                                <label for="modal-species"
                                    class="text-xs font-medium text-gray-900 block mb-2">Especie:</label>
                                <input type="text" name="modal-species" id="modal-species"
                                    class="shadow-sm border border-gray-300 text-gray-900 sm:text-xs rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block p-2 input-short input-background"
                                    required>
                            </div>
                            <div class="relative mb-4">
                                <label for="modal-breed"
                                    class="text-xs font-medium text-gray-900 block mb-2">Raza:</label>
                                <input type="text" name="modal-breed" id="modal-breed"
                                    class="shadow-sm border border-gray-300 text-gray-900 sm:text-xs rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block p-2 input-short input-background"
                                    required>
                            </div>
                            <div class="relative mb-4">
                                <label for="modal-gender"
                                    class="text-xs font-medium text-gray-900 block mb-2">Género:</label>
                                <input type="text" name="modal-gender" id="modal-gender"
                                    class="shadow-sm border border-gray-300 text-gray-900 sm:text-xs rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block p-2 input-short input-background"
                                    required>
                            </div>
                            <div class="relative mb-4">
                                <label for="modal-microchip-number"
                                    class="text-xs font-medium text-gray-900 block mb-2">Número de Microchip:</label>
                                <input type="text" name="modal-microchip-number" id="modal-microchip-number"
                                    class="shadow-sm border border-gray-300 text-gray-900 sm:text-xs rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block p-2 input-short input-background"
                                    required>
                            </div>
                            <div class="relative mb-4">
                                <label for="modal-size"
                                    class="text-xs font-medium text-gray-900 block mb-2">Tamaño:</label>
                                <input type="text" name="modal-size" id="modal-size"
                                    class="shadow-sm border border-gray-300 text-gray-900 sm:text-xs rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block p-2 input-short input-background"
                                    required>
                            </div>
                            <div class="relative mb-4">
                                <label for="modal-coat-color" class="text-xs font-medium text-gray-900 block mb-2">Color
                                    de Pelaje:</label>
                                <input type="text" name="modal-coat-color" id="modal-coat-color"
                                    class="shadow-sm border border-gray-300 text-gray-900 sm:text-xs rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block p-2 input-short input-background"
                                    required>
                            </div>

                        </div>
                        <!-- Asegúrate de tener un botón de guardar en el modal -->
                        <button id="save-pet-button" onclick="savePetChanges()">Guardar cambios</button>

                        <div class="mt-6 flex justify-end">
                            <button onclick="cerrarModal()"
                                class="bg-red-500 text-white px-4 py-2 rounded-md">Cerrar</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contenido Historia Clínica -->
            <div id="tab2" class="hidden p-6">
                <h2 class="text-2xl font-bold">Historia Clínica</h2>
                <!-- Tabla para el historial médico -->
                <div class="overflow-x-auto mt-4">
                    <table class="min-w-full border border-gray-300 rounded-lg text-xs">
                        <thead>
                            <tr class="bg-gray-100">
                                <th class="border border-gray-300 p-1 text-left rounded-tl-lg rounded-tr-lg">Fecha</th>
                                <th class="border border-gray-300 p-1 text-left">Motivo de Consulta</th>
                                <th class="border border-gray-300 p-1 text-left">Diagnóstico</th>
                                <th class="border border-gray-300 p-1 text-left">Tratamiento</th>
                                <th class="border border-gray-300 p-1 text-left rounded-bl-lg rounded-br-lg">Detalles de
                                    la Cita</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td id="citaFecha1" class="border border-gray-300 p-1 rounded-b-lg">01/01/2024</td>
                                <td id="citaMotivo1" class="border border-gray-300 p-1">Chequeo general</td>
                                <td id="citaDiagnostico1" class="border border-gray-300 p-1">Salud óptima</td>
                                <td id="citaTratamiento1" class="border border-gray-300 p-1">Vacuna aplicada</td>
                                <td class="border border-gray-300 p-1"><button onclick="openModal('modal1')"
                                        class="text-green-500 hover:underline">Ver detalles</button></td>
                            </tr>
                            <tr>
                                <td class="border border-gray-300 p-1 rounded-b-lg">15/02/2024</td>
                                <td class="border border-gray-300 p-1">Tos persistente</td>
                                <td class="border border-gray-300 p-1">Infección respiratoria</td>
                                <td class="border border-gray-300 p-1">Antibióticos recetados</td>
                                <td class="border border-gray-300 p-1"><button onclick="openModal('modal2')"
                                        class="text-green-500 hover:underline">Ver detalles</button></td>
                            </tr>
                            <tr>
                                <td class="border border-gray-300 p-1 rounded-b-lg">10/03/2024</td>
                                <td class="border border-gray-300 p-1">Control de parásitos</td>
                                <td class="border border-gray-300 p-1">Parásitos detectados</td>
                                <td class="border border-gray-300 p-1">Desparasitante administrado</td>
                                <td class="border border-gray-300 p-1"><button onclick="openModal('modal3')"
                                        class="text-green-500 hover:underline">Ver detalles</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- Botón para exportar PDF -->
                <div class="mt-4">
                    <button onclick="openExportModal()"
                        class="bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700">Exportar PDF de
                        historial clínico</button>
                </div>
            </div>

            <!-- Modal para exportar PDF -->
            <div id="exportModal"
                class="fixed inset-0 hidden z-50 flex items-center justify-center bg-gray-800 bg-opacity-50">
                <div class="bg-white rounded-lg p-6 w-1/3">
                    <h3 class="text-lg font-bold mb-4">Exportar PDF</h3>
                    <p class="mb-4">El archivo PDF del historial clínico se exportará a su computador.</p>
                    <div class="flex justify-end">
                        <button onclick="closeExportModal()"
                            class="bg-green-500 text-white font-bold py-2 px-4 rounded hover:bg-green-700">Aceptar</button>
                    </div>
                </div>
            </div>
            <!-- Fin Contenido Historia Clínica -->

            <!-- Modales para detalles de la cita -->
            <div id="modal1" class="modal hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50">
                <div
                    class="bg-white rounded-lg shadow-lg p-6 max-w-md w-full transition-all duration-300 transform scale-95">
                    <h2 class="text-xl font-semibold mb-4">Detalles de la Cita</h2>
                    <div class="space-y-4 text-gray-600">
                        <label class="block">
                            <strong>Fecha:</strong>
                            <input type="date" id="editFecha1"
                                class="block w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-green-300"
                                value="2024-01-01">
                        </label>
                        <label class="block">
                            <strong>Motivo de Consulta:</strong>
                            <input type="text" id="editMotivo1"
                                class="block w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-green-300"
                                value="Chequeo general">
                        </label>
                        <label class="block">
                            <strong>Diagnóstico:</strong>
                            <input type="text" id="editDiagnostico1"
                                class="block w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-green-300"
                                value="Salud óptima">
                        </label>
                        <label class="block">
                            <strong>Tratamiento:</strong>
                            <input type="text" id="editTratamiento1"
                                class="block w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-green-300"
                                value="Vacuna aplicada">
                        </label>
                    </div>
                    <button onclick="guardarCambios('1')"
                        class="mt-4 w-full text-white font-bold py-2 px-4 rounded-full shadow-md transition-all duration-200"
                        style="background-color: #69d9cd;">
                        Guardar Cambios
                    </button>
                    <button onclick="closeModal('modal1')"
                        class="mt-2 w-full text-white font-bold py-2 px-4 rounded-full shadow-md transition-all duration-200"
                        style="background-color: #69d9cd;">
                        Cerrar
                    </button>
                </div>
            </div>
            <!-- Fin Contenido Historia Clínica -->


            <!-- Contenido Vacunas -->
            <div id="tab3" class="hidden p-6">
                <h2 class="text-2xl font-bold">Vacunas</h2>

                <!-- Tabla para el historial de vacunas ajustada para ser más pequeña -->
                <div class="overflow-x-auto mt-4">
                    <table class="min-w-full border border-gray-300 rounded-lg text-xs">
                        <thead>
                            <tr class="bg-gray-100">
                                <th class="border border-gray-300 px-2 py-1 text-left rounded-tl-lg rounded-tr-lg">Fecha
                                </th>
                                <th class="border border-gray-300 px-2 py-1 text-left">Vacuna</th>
                                <th class="border border-gray-300 px-2 py-1 text-left">Dosis</th>
                                <th class="border border-gray-300 px-2 py-1 text-left">Veterinario</th>
                            </tr>
                        </thead>
                        <tbody id="vacunasTableBody">
                        </tbody>
                    </table>
                </div>
                <!-- Botón para añadir vacuna -->
                <div class="flex justify-end mt-4">
                    <button id="addVaccineBtn" class="bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600"
                        onclick="openAddVaccineModal()">Añadir Vacuna</button>
                </div>
            </div>

            <!-- Modal para añadir vacuna -->
            <div id="addVaccineModal"
                class="modal hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h2 class="text-xl font-bold mb-4">Añadir Vacuna</h2>
                    <form id="addVaccineForm">
                        <div class="mb-4">
                            <label for="vacunaFecha" class="block mb-2">Fecha:</label>
                            <input type="date" id="vacunaFecha" class="border border-gray-300 rounded-md p-1 w-full"
                                required>
                        </div>
                        <div class="mb-4">
                            <label for="vacunaNombre" class="block mb-2">Vacuna:</label>
                            <input type="text" id="vacunaNombre" class="border border-gray-300 rounded-md p-1 w-full"
                                required>
                        </div>
                        <div class="mb-4">
                            <label for="vacunaDosis" class="block mb-2">Dosis:</label>
                            <input type="text" id="vacunaDosis" class="border border-gray-300 rounded-md p-1 w-full"
                                required>
                        </div>
                        <div class="mb-4">
                            <label for="vacunaVeterinario" class="block mb-2">Veterinario:</label>
                            <input type="text" id="vacunaVeterinario"
                                class="border border-gray-300 rounded-md p-1 w-full" required>
                        </div>
                        <div class="flex justify-end">
                            <button type="button"
                                class="mt-4 w-full text-white font-bold py-2 px-4 rounded-full shadow-md transition-all duration-200 mr-5"
                                style="background-color: #69d9cd;" onclick="addVaccine()">Agregar</button>
                            <button type="button"
                                class="mt-4 w-full text-white font-bold py-2 px-4 rounded-full shadow-md transition-all duration-200"
                                style="background-color: #f83131;" onclick="closeModal()">Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>
            <!-- Fin Contenido Vacunas -->


            <!-- Contenido Desparasitaciones -->
            <div id="tab4" class="hidden p-6">
                <h2 class="text-2xl font-bold">Desparasitaciones</h2>

                <!-- Tabla para el historial de desparasitaciones ajustada para ser más pequeña -->
                <div class="overflow-x-auto mt-4">
                    <table class="min-w-full border border-gray-300 rounded-lg text-xs">
                        <thead>
                            <tr class="bg-gray-100">
                                <th class="border border-gray-300 px-2 py-1 text-left rounded-tl-lg rounded-tr-lg">Fecha
                                </th>
                                <th class="border border-gray-300 px-2 py-1 text-left">Producto</th>
                                <th class="border border-gray-300 px-2 py-1 text-left">Dosis</th>
                                <th class="border border-gray-300 px-2 py-1 text-left">Veterinario</th>
                            </tr>
                        </thead>
                        <tbody id="desparasitacionesTableBody">
                        </tbody>
                    </table>
                </div>
                <!-- Botón para añadir desparasitacion -->
                <div class="flex justify-end mt-4">
                    <button id="addDesparasitacionBtn"
                        class="bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600"
                        onclick="openAddDewormerModal()">Añadir Desparasitacion</button>
                </div>

            </div>

            <!-- Modal para agregar nueva desparasitacion -->
            <div id="desparasitacionModal"
                class="modal hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50">
                <div class="flex items-center justify-center w-full">
                    <div class="bg-white rounded-lg p-6">
                        <h2 class="text-lg font-bold mb-4">Agregar Nueva Desparasitacion</h2>
                        <label class="block mb-2">Fecha:</label>
                        <input type="date" id="newDesparasitacionFecha"
                            class="border border-gray-300 rounded-md w-full mb-4 p-1">
                        <label class="block mb-2">Producto:</label>
                        <input type="text" id="newDesparasitacionProducto"
                            class="border border-gray-300 rounded-md w-full mb-4 p-1" placeholder="Nombre del producto">
                        <label class="block mb-2">Dosis:</label>
                        <input type="text" id="newDesparasitacionDosis"
                            class="border border-gray-300 rounded-md w-full mb-4 p-1" placeholder="Dosis (ml/tabletas)">
                        <label class="block mb-2">Veterinario:</label>
                        <input type="text" id="newDesparasitacionVeterinario"
                            class="border border-gray-300 rounded-md w-full mb-4 p-1"
                            placeholder="Nombre del veterinario">
                        <div class="flex justify-end">
                            <button
                                class="mt-4 w-full text-white font-bold py-2 px-4 rounded-full shadow-md transition-all duration-200 mr-5"
                                style="background-color: #69d9cd;" onclick="addDewormer()">Guardar</button>
                            <button
                                class="mt-4 w-full text-white font-bold py-2 px-4 rounded-full shadow-md transition-all duration-200"
                                style="background-color: #f83131;" onclick="closeDewormerModal()">Cancelar</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Fin Contenido Desparasitaciones -->


            <!-- Comienzo Ficha -->
            <div id="tab5" class="hidden p-6">
                <h2 class="text-2xl font-bold">Ficha de:</h2>

                <!-- Card para Anamnesis -->
                <section class="mt-6">
                    <h3 class="text-lg font-semibold">Anamnesis</h3>
                    <div class="bg-gray-100 p-4 rounded-lg shadow-md w-full max-w-screen-lg mx-auto">
                        <form id="anamnesisForm" class="grid gap-4">
                            <!-- Fecha y hora -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <label class="block">
                                    Fecha:
                                    <input type="date" id="consultationDate"
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        required>
                                </label>
                                <label class="block">
                                    Hora de inicio de la consulta:
                                    <input type="time" id="consultationStartTime"
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        min="09:00" max="18:00" required>
                                </label>
                                <label class="block">
                                    Temperatura del animal (°C):
                                    <input type="number" id="animalTemperature"
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        placeholder="Temperatura en grados Celsius" step="0.1" min="32" max="41">
                                    <small class="text-gray-500">Usar punto (.) para decimales</small>
                                </label>
                            </div>

                            <!-- Frecuencias y Peso -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <label class="block">
                                    Frec. Cardíaca (latidos/min):
                                    <input type="number" id="heartRate"
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        placeholder="Latidos por minuto" step="1" min="60" max="220">
                                </label>
                                <label class="block">
                                    Frec. Respiratoria (resp/min):
                                    <input type="number" id="respiratoryRate"
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        placeholder="Respiraciones por minuto" step="1" min="10" max="60">
                                </label>
                                <label class="block">
                                    Peso a última fecha (en kg):
                                    <input type="text" id="patientWeight"
                                        class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                        value="30000">
                                </label>
                            </div>

                            <!-- Campos de texto en ancho completo -->
                            <label class="block w-full">
                                Motivo de la consulta:
                                <textarea id="consultationReason"
                                    class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                    rows="3"></textarea>
                            </label>
                            <label class="block w-full">
                                Examen físico:
                                <textarea id="physicalExam"
                                    class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                    rows="3"></textarea>
                            </label>
                            <label class="block w-full">
                                Diagnóstico:
                                <textarea id="diagnosis"
                                    class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                    rows="3"></textarea>
                            </label>
                            <label class="block w-full">
                                Indicaciones y Tratamientos:
                                <textarea id="indications"
                                    class="mt-1 block w-full border border-gray-300 rounded-md p-1 text-sm"
                                    rows="3"></textarea>
                            </label>
                        </form>
                    </div>
                </section>

                <!-- Botón guardar -->
                <button id="saveButton"
                    class="mt-4 p-2 bg-green-400 text-white rounded-md hover:bg-green-600 flex items-center justify-center">
                    Guardar ficha
                </button>

                <!-- Modal -->
                <div id="confirmationModal"
                    class="hidden fixed inset-0 z-50 flex items-center justify-center bg-gray-800 bg-opacity-50">
                    <div class="bg-white p-6 rounded-lg shadow-lg">
                        <h3 class="text-lg font-semibold">Confirmación</h3>
                        <p>¿Estás seguro de que deseas guardar la ficha?</p>
                        <div class="mt-4 flex justify-between">
                            <button id="confirmSave"
                                class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">Confirmar</button>
                            <button id="cancelSave"
                                class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">Cancelar</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Agenda -->
    <div class="container mx-auto flex items-start justify-center pt-10" id="agenda">
        <section class="p-4 w-full max-w-5xl bg-white shadow-md rounded-lg">
            <h2 id="monthTitle" class="text-xl font-semibold text-center mb-4">Mi Agenda - Octubre 2024</h2>
            <!-- Mes actual -->

            <!-- Contenedor para los enlaces de navegación -->
            <div class="flex justify-end mb-2">
                <span id="prevMonth" class="cursor-pointer text-blue-500 underline text-sm mr-2 hidden">◀</span>
                <!-- Solo el ícono -->
                <span id="toggleView" class="cursor-pointer text-blue-500 underline text-xs mx-2">Cambiar a Vista
                    Mensual</span> <!-- Tamaño de fuente más pequeño -->
                <span id="nextMonth" class="cursor-pointer text-blue-500 underline text-sm hidden">▶</span>
                <!-- Solo el ícono -->
            </div>

            <!-- Contenido de la agenda -->
            <div id="weeklyView" class="agenda-view">
                <!-- Días de la semana -->
                <div class="grid grid-cols-6 gap-2 text-center mb-4 mt-2">
                    <div></div> <!-- Espacio vacío para las horas -->
                    <div>Lunes 7</div>
                    <div>Martes 8</div>
                    <div>Miércoles 9</div>
                    <div>Jueves 10</div>
                    <div>Viernes 11</div>
                </div>

                <!-- Horas y Citas -->
                <div class="grid grid-cols-6 gap-2">
                    <!-- Horas en la columna izquierda -->
                    <div class="text-right pr-2">
                        <div class="py-1 border-t">08:30</div>
                        <div class="py-1 border-t">09:30</div>
                        <div class="py-1 border-t">10:30</div>
                        <div class="py-1 border-t">11:30</div>
                        <div class="py-1 border-t">12:30</div>
                        <div class="py-1 border-t">13:30</div>
                        <div class="py-1 border-t">14:30</div>
                        <div class="py-1 border-t">15:30</div>
                        <div class="py-1 border-t">16:30</div>
                        <div class="py-1 border-t">17:30</div>
                    </div>

                    <!-- Citas para cada día -->
                    <div class="border-l">
                        <div class="appointment-card border-t bg-yellow-100 text-yellow-700 rounded-md shadow-lg p-1 cursor-pointer"
                            style="grid-row: 4 / span 2;"
                            onclick="openModalWeek('Presencial', 'Fernanda Sanz', 'fernanda@example.com', '+56912345678', 'fas fa-dog', 'COOKIE', 'Yorkshire Terrier', 'Hembra', '11:00 AM', '12:00 PM', 'Consulta General', 'Revisión anual', '25 de Octubre 2024')">
                            <p class="text-[10px] font-bold">11:00 - 12:00</p> <!-- Tamaño reducido -->
                            <p class="text-xs font-semibold">COOKIE</p>
                            <p class="text-[10px]">Yorkshire Terrier</p> <!-- Tamaño reducido -->
                            <div class="flex items-center text-[10px]"> <!-- Tamaño reducido -->
                                <span class="mr-1 text-gray-500"><i class="fas fa-user"></i></span>
                                <p>Fernanda Sanz</p>
                            </div>
                        </div>
                        <div class="py-1 border-t"></div>
                    </div>

                    <div class="border-l">
                        <div class="appointment-card border-t bg-green-100 text-green-700 rounded-md shadow-lg p-1 cursor-pointer"
                            style="grid-row: 3 / span 2;"
                            onclick="openModalWeek('Presencial', 'Mario Pérez', 'mario@example.com', '+56987654321', 'fas fa-cat', 'MANDARINA', 'Gato', 'Macho', '10:30 AM', '11:30 AM', 'Consulta General', 'Revisión anual', '25 de Octubre 2024')">
                            <p class="text-[10px] font-bold">10:30 - 11:30</p> <!-- Tamaño reducido -->
                            <p class="text-xs font-semibold">MANDARINA</p>
                            <p class="text-[10px]">Gato</p> <!-- Tamaño reducido -->
                            <div class="flex items-center text-[10px]"> <!-- Tamaño reducido -->
                                <span class="mr-1 text-gray-500"><i class="fas fa-user"></i></span>
                                <p>Mario Pérez</p>
                            </div>
                        </div>
                        <div class="py-1 border-t"></div>
                    </div>
                </div>
            </div>

            <!-- Vista mensual (inicialmente oculta) -->
            <div id="monthlyView" class="agenda-view hidden">
                <div class="grid grid-cols-7 gap-2 text-center mb-4 mt-2">
                    <div>Dom</div>
                    <div>Lun</div>
                    <div>Mar</div>
                    <div>Mié</div>
                    <div>Jue</div>
                    <div>Vie</div>
                    <div>Sáb</div>
                </div>
                <div class="grid grid-cols-7 gap-2" id="calendarDays"></div>
            </div>
        </section>

        <!-- Modal semanal -->
        <!-- Modal (inicialmente oculto) -->
        <div id="modalweek" class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 hidden">
            <div class="bg-white rounded-lg p-6 w-96 shadow-xl relative">
                <!-- Botón de cerrar -->
                <button class="absolute top-2 right-2 text-gray-500 hover:text-gray-700" onclick="closeModalWeek()">
                    <i class="fas fa-times"></i> <!-- Ícono de cerrar -->
                </button>

                <!-- Header del modal -->
                <div class="flex justify-between items-center mb-4 border-b pb-2">
                    <h2 class="text-xl font-bold" id="modalweek-type">Cita: Presencial</h2>
                    <!-- Puedes cambiar a 'Online' dinámicamente -->
                    <span class="text-gray-500 text-sm" id="modalweek-date-icon"><i class="fas fa-calendar"></i> <span
                            id="modalweek-date">25 de Octubre 2024</span></span>
                </div>

                <!-- Información del dueño -->
                <div class="mb-4 border-b border-gray-300 pb-2">
                    <p class="text-lg font-semibold" id="modalweek-owner">Fernanda Sanz</p>
                    <p class="text-sm text-gray-600">
                        <i class="fas fa-envelope mr-1"></i>
                        <span id="modalweek-email">fernanda@example.com</span>
                    </p>
                    <p class="text-sm text-gray-600">
                        <i class="fas fa-phone mr-1"></i>
                        <span id="modalweek-phone">+56912345678</span>
                    </p>
                </div>

                <!-- Información de la mascota -->
                <div class="flex items-center mb-4 border-b border-gray-300 pb-2">
                    <div class="w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mr-4">
                        <i id="modalweek-pet-icon" class="fas fa-dog text-2xl text-yellow-500"></i>
                        <!-- Cambiará entre 'fas fa-cat' o 'fas fa-dog' -->
                    </div>
                    <div>
                        <p class="text-lg font-semibold" id="modalweek-pet">COOKIE</p>
                        <p class="text-sm text-gray-600" id="modalweek-breed">Yorkshire Terrier, Hembra</p>
                        <!-- Sexo dinámico -->
                    </div>
                </div>

                <!-- Detalles de la cita -->
                <div class="mb-4 text-sm text-gray-600 space-y-2 border-gray-300 pb-2">
                    <p>
                        <i class="fas fa-clock mr-1"></i> Hora Inicio:
                        <input id="modalweek-start-time" type="time" value="11:00" disabled />
                    </p>
                    <p>
                        <i class="fas fa-clock mr-1"></i> Hora Fin:
                        <input id="modalweek-end-time" type="time" value="12:00" disabled />
                    </p>
                    <p><i class="fas fa-info-circle mr-1"></i> Tipo: <span id="modalweek-type-info">Consulta
                            General</span></p>
                    <p><i class="fas fa-file-alt mr-1"></i> Motivo: <span id="modalweek-reason">Revisión anual</span>
                    </p>
                </div>

                <!-- Botones de acción -->
                <div class="flex justify-between">
                    <button class="bg-red-500 text-white px-4 py-2 rounded-md"
                        onclick="cancelAppointmentWeek()">Cancelar</button>
                    <button id="editTime" class="bg-green-400 text-white px-4 py-2 rounded-md"
                        onclick="editAppointmentWeek()">Editar</button>
                </div>
            </div>
        </div>
        <!-- Fin Agenda -->



        <script src="{{ url_for('static', filename='js/profile_vet.js') }}"></script>

</body>

</html>